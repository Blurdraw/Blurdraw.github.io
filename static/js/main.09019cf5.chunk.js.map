{"version":3,"sources":["store/reducers/deal-theme.js","store/reducers/index.js","store/index.js","store/reducers/deal-theme-name.js","store/reducers/deal-bg-blur.js","store/reducers/deal-link-list.js","store/reducers/deal-user.js","store/reducers/deal-bg-pic.js","store/reducers/deal-dock.js","lib/themeManager.js","lib/HttpReq.js","lib/link-list.js","lib/bgPicManager.js","lib/pub-sub.js","components/menu/index.jsx","components/search-input/search-input.jsx","components/search-input/adv-item.jsx","lib/device-detector.js","components/search-input/src/adv-funcs.js","components/search-input/advPanel.jsx","lib/css-mix.js","components/home/src/link-item.jsx","components/home/src/add.jsx","components/home/src/link-edit.jsx","components/home/src/link-list.jsx","components/home/src/link-panel.jsx","components/timer/index.jsx","components/home/index.jsx","components/about/index.jsx","components/header/index.jsx","lib/ws-cli.js","components/sign/index.jsx","components/user/avatar.jsx","components/user/usr-pre.jsx","components/setting/component/pic.jsx","components/setting/bg.jsx","components/setting/index.jsx","components/message/index.jsx","components/message/all-msg.jsx","components/message/src/msg-bubble.jsx","components/message/src/tri.jsx","components/message/src/msg-item.jsx","components/message/src/edit-panel.jsx","components/message/src/friend.jsx","components/message/send-msg.jsx","components/main-layout.jsx","components/back-pic/back-pic.jsx","App.js","serviceWorker.js","index.js"],"names":["dealtheme","state","action","newstate","type","payload","dockOpacity","reducer","combineReducers","theme","themeName","bgBlurSize","links","console","log","push","user","login","bgPic","index","localStorage","setItem","themeManager","themes","__theme","themeIndex","init","this","name","base","backgroundColor","color","changeTheme","length","HttpReq","ajax","req","xmlhttp","XMLHttpRequest","onreadystatechange","readyState","status","dataType","data","JSON","parse","responseText","success","e","error","open","url","async","setRequestHeader","send","LinkManager","_links","get_list","window","getItem","stringify","Manager","urls","picUrls","store","createStore","dispatch","PicsManager","ps","topics","Map","newtopic","topic","has","warn","set","Array","pub","args","get","sub","callback","PubSub","ToolMenu","Layout","Header","Content","Footer","Sider","style","defaultSelectedKeys","Item","key","HomeOutlined","className","to","MessageOutlined","count","InboxOutlined","SettingOutlined","InfoCircleOutlined","React","Component","baseTheme","inputFocus","width","SearchInput","isFocus","handlefoucus","target","value","setState","handleblur","handelInput","onKeyup","keyCode","size","placeholder","onChange","onFocus","onBlur","onKeyUp","padding","borderRadius","margin","AdvItem","href","props","class","keyword","DeviceDetector","inited","test","navigator","userAgent","__device_type","onresize","set_scale","__screen_scale","scale","document","body","clientWidth","advFunctions","baidusearch","deviceDetector","device_type","baidutrans","mobileurl","get_adv","searchtext","advs","f","AdvPanel","display","handelBlur","findAdv","kw","advFuncs","goDefault","res","map","item","CssMix","allcss","css","reduce","pre","now","itemContainer","float","LinkItem","align","src","alt","connect","Add","handleClick","onClick","icon","FormOutlined","fontSize","borderWidth","borderColor","borderStyle","flexDirection","justifyContent","hidden","Edit","showEdit","del","array","list","splice","parseInt","updata","moveUp","i","change","iname","iurl","ArrowUpOutlined","EditOutlined","DeleteOutlined","ref","input","newList","List","k","LinkPanel","vis","opacity","flexWrap","handleOk","add","message","info","handleCancel","refs","title","frequency","linkname","visible","onOk","onCancel","textAlign","Timer","hour","min","getTime","d","h","m","setInterval","Date","getMinutes","getHours","height","Home","xs","sm","md","lg","Title","Typography","Paragraph","About","Text","position","zIndex","fntStyle","dealClick","AppstoreOutlined","fileSegTotal","fileSp","createConn","resolve","reject","socket","WebSocket","addEventListener","event","onerror","Server","__state","routers","onCreate","onMsg","msgText","msgObj","head","origin","forEach","__sendFileSeg","sender","Error","onErr","detail","msg","apptype","conn","that","Promise","then","s","onOpen","onClose","catch","err","reConn","text","sendfile","file","reader","FileReader","readAsDataURL","onload","result","start","end","slice","fileSlice","startTime","nowSeg","total","handle","seq","ack","endTime","startFileTrans","__conn","setTimeout","Sign","componentDidMount","Sever","getData","t","id","uid","uname","getPwd","pwd","login_res","token","setUser","close","sign","sign_res","footer","closable","Group","prefix","SmileOutlined","Password","KeyOutlined","UserOutlined","UsrAva","UserPanel","userLogin","showSign","toLogin","closeLogin","upAvatar","fileselect","files","logOut","active","Pic","changePic","changeTo","Index","currentIndex","broader","PicSelect","currentI","changeIndex","pics","Setting","blurSize","changeThemeName","onBlurChange","v","onBlurNumChange","userLoginOut","removeItem","delUser","onDockOpacityChange","changeDockOpacity","max","step","changeblursize","changeBackPic","Message","mode","children","Input","TextArea","AllMsg","_post_his","postit","connState","userUnlogin","editvisible","confirmLoading","creatSuc","fetchDataBack","offset","fetchPostData","para","limit","postData","context","msginput","innerText","msgtitle","senderid","time","errInfo","postDataBack","Modal","content","openEdit","showMsg","whiteSpace","unLogin","contentEditable","minHeight","gutter","maxWidth","wordBreak","wordWrap","border","sendstyle","recvstyle","MsgBubb","msgBody","cssMix","left","right","Tri","dir","recv","MsgRow","show","msgCase","overflowY","contaniner","EditPanel","submit","tid","nowPeople","methods","allMsg","filter","nowUser","edit","span","rows","allowClear","wait","Fitem","chatWith","friend","SendMsg","NaN","friends","addfvis","msgHistory","showFriends","addFriend","infid","infname","fs","dealRecvMsg","call","do","people","msgs","handleAdd","friendList","block","UserAddOutlined","MainLayout","dealDrawer","placement","path","component","HomePage","render","exact","transition","BackPic","isBlur","lastBlur","blur","unblur","blurBySize","bg","background","backgroundSize","nextProps","prevState","App","Boolean","location","hostname","match","ReactDOM","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.09019cf5.chunk.js","sourcesContent":["function dealtheme(state = {},action){\r\n\tlet newstate = {}\r\n\tswitch (action.type)\r\n\t{\r\n\t\tcase 'changetheme' :\r\n\t\t\tnewstate = action.payload\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\tnewstate = state\r\n\t\t\tbreak\r\n\t\t\r\n\t}\r\n\treturn newstate\r\n}\r\n\r\nexport default dealtheme","import {combineReducers} from 'redux'\r\n\r\nimport dealBlur from './deal-bg-blur'\r\nimport dealtheme from './deal-theme'\r\nimport dealLinks from './deal-link-list.js'\r\nimport dealUser from './deal-user.js'\r\nimport dealThemeName from './deal-theme-name.js'\r\nimport dealBgPic from './deal-bg-pic.js'\r\nimport dealDock from './deal-dock.js'\r\n\r\nlet reducer = combineReducers({\r\n\ttheme:dealtheme,\r\n\tthemeName:dealThemeName,\r\n\tbgBlurSize:dealBlur,\r\n\tlinks:dealLinks,\r\n\tuser:dealUser,\r\n\tbgPic:dealBgPic,\r\n\tdockOpacity:dealDock\r\n})\r\n\r\nexport default reducer","import {createStore} from 'redux'\r\nimport reducer from './reducers/index.js'\r\n\r\nimport themeManager from '../lib/themeManager'\r\nimport LinkManager from '../lib/link-list.js'\r\nimport PicsManager from '../lib/bgPicManager.js'\r\n\r\nthemeManager.init()\r\nLinkManager.init()\r\n\r\nlet dockOpacity\r\nif(dockOpacity = localStorage.getItem('dorkopacity')){\r\n\t\r\n} else {\r\n\tdockOpacity = 0.7\r\n\tlocalStorage.setItem('dorkopacity',dockOpacity)\r\n}\r\n\r\nlet store = createStore(reducer)\r\n\r\n//一些初始化操作\r\nstore.dispatch({type:\"changetheme\",\r\n\tpayload:themeManager.theme\r\n})\r\nstore.dispatch({type:\"changeLinks\",\r\n\tpayload:LinkManager.links\r\n})\r\nstore.dispatch({type:\"changeblursize\",\r\n\tpayload:0\r\n})\r\nstore.dispatch({type:\"bgPicChange\",\r\n\tpayload:PicsManager.init()\r\n})\r\nstore.dispatch({type:\"changeopacitysize\",\r\n\tpayload:dockOpacity\r\n})\r\n\r\nexport default store","export default function themename (state = 'light',action){\r\n    let newstate = {}\r\n    switch (action.type)\r\n    {\r\n        case  'changethemename':\r\n           newstate = action.payload\r\n           break\r\n        default :\r\n            newstate = state\r\n           break\r\n   }\r\n    return newstate\r\n}","export default function dealBlur (state = 0,action){\r\n    let newstate = 0\r\n    switch (action.type)\r\n    {\r\n        case 'changeblursize' :\r\n           newstate = action.payload\r\n           break\r\n        default :\r\n            newstate = state\r\n           break\r\n   }\r\n    return newstate\r\n}","export default function dealLinks (state = [],action){\r\n    let newstate\r\n    switch (action.type)\r\n    {\r\n        case \"changeLinks\" :\r\n           newstate = action.payload\r\n           break\r\n\t\tcase \"addLinks\":\r\n\t\t\tconsole.log(state,action)\r\n\t\t\tstate.push(action.payload)\r\n\t\t\tnewstate = state\r\n\t\t\tbreak\r\n        default :\r\n           newstate = state\r\n           break\r\n   }\r\n    return newstate\r\n}","export default function dealUser (state = {},action){\r\n    let newstate = {}\r\n    switch (action.type)\r\n    {\r\n        case 'userLogin':\r\n\t\t\taction.payload.login = true\r\n            newstate = action.payload\r\n            break\r\n\t\tcase 'userLoginOut':\r\n\t\t\tnewstate.login = false\r\n        default :\r\n            newstate = state\r\n            break\r\n   }\r\n    return newstate\r\n}","export default function bgPic (state = null,action){\r\n    let newstate\r\n    switch (action.type)\r\n    {\r\n        case \"bgPicChange\" :\r\n           newstate = action.payload\r\n           break\r\n\t\tcase \"bgIndexChange\":\r\n\t\t\tstate.index = action.payload\r\n\t\t\tnewstate = state\r\n\t\t\tbreak\r\n        default :\r\n            newstate = state\r\n            break\r\n   }\r\n    return newstate\r\n}","export default function dealdock (state = 0.7,action){\r\n    let newstate\r\n    switch (action.type)\r\n    {\r\n        case  'changeopacitysize':\r\n           newstate = action.payload\r\n\t\t   localStorage.setItem('dorkopacity',newstate)\r\n           break\r\n        default :\r\n            newstate = state\r\n           break\r\n   }\r\n    return newstate\r\n}","const themeManager = {\r\n\tthemes:[],\r\n\t__theme:null,\r\n\tthemeIndex:0,\r\n\tinit(){\r\n\t\tthis.themes = [{\r\n\t\t\tname:'light',\r\n\t\t\tbase:{\r\n\t\t\t\tbackgroundColor:'#fff',\r\n\t\t\t\tcolor:'#000'\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname:'dark',\r\n\t\t\tbase:{\r\n\t\t\t\tbackgroundColor:'#242324',\r\n\t\t\t\tcolor:'#fff'\r\n\t\t\t}\r\n\t\t}]\r\n\t\tthis.__theme = this.themes[this.themeIndex]\r\n\t},\r\n\tget theme(){\r\n\t\treturn this.__theme\r\n\t},\r\n\tchangeTheme(){\r\n\t\tthis.themeIndex = (this.themeIndex+1) % this.themes.length\r\n\t\tthis.__theme = this.themes[this.themeIndex]\r\n\t}\r\n}\r\n\r\nexport default themeManager","const HttpReq = {\r\n\tajax(req){\r\n\t\tlet xmlhttp = new XMLHttpRequest();\r\n\t\txmlhttp.onreadystatechange=function(){\r\n\t\t    if(xmlhttp.readyState==4 && xmlhttp.status==200)\r\n\t\t    {\r\n\t\t\t\tif(req.dataType == 'json'){\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet data = JSON.parse(xmlhttp.responseText)\r\n\t\t\t\t\t\treq.success(data) \r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(e){\r\n\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t    } \r\n\t\t\telse if(xmlhttp.status >= 400){\r\n\t\t\t\treq.error(\"error:\"+xmlhttp.status)\r\n\t\t\t}\r\n\t\t}\r\n\t\txmlhttp.open(req.type,req.url,req.async)\r\n\t\t//先open才能进行下一步设置请求头\r\n\t\tif(req.dataType == 'json')\r\n\t\t\txmlhttp.setRequestHeader(\"Accept\" ,\"application/json, text/javascript, */*; q=0.01\")\r\n\t\txmlhttp.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\")\r\n\t\t\r\n\t\tif(req.type == 'POST')\r\n\t\t\txmlhttp.send(req.data)\r\n\t\telse\r\n\t\t\txmlhttp.send()\r\n\t}\r\n}\r\nexport default HttpReq","import HttpReq from './HttpReq.js'\r\n\r\nconst LinkManager = {\r\n\t_links:[],\r\n\tinit(){\r\n\t\tthis.get_list()\r\n\t\tconsole.log(this.links)\r\n\t},\r\n\tget_list(){\r\n\t\tlet data = null\r\n\t\tif(data = window.localStorage.getItem('linkList')){\r\n\t\t\tthis._links = JSON.parse(data)\r\n\t\t} else {\r\n\t\t\tHttpReq.ajax({\r\n\t\t\t\turl: \"http://localhost/ftp/applist.json\", // 目标资源\r\n\t\t\t\tasync:false, //默认是true，即为异步方式\r\n\t\t\t\tdataType: \"json\", // 服务器响应的数据类型\r\n\t\t\t\ttype: \"GET\", // 请求方式\r\n\t\t\t\tsuccess:(data)=>{\r\n\t\t\t\t\tthis._links = data\r\n\t\t\t\t\twindow.localStorage.setItem('linkList',JSON.stringify(data))\r\n\t\t\t\t},\r\n\t\t\t\terror(e){\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tget links(){\r\n\t\treturn this._links\r\n\t}\r\n}\r\n\r\nexport default LinkManager","const Manager = {\r\n\tinit(){\r\n\t\tlet urls,picUrls\r\n\t\tlet index = 0\r\n\t\tif((urls = localStorage.getItem('bgPics')) && (index = localStorage.getItem('bgPicsIndex'))){\r\n\t\t\tpicUrls = JSON.parse(urls)\r\n\t\t}else{\r\n\t\t\tpicUrls = [\r\n\t\t\t\t{url:'http://pic1.win4000.com/wallpaper/b/55597435bb036.jpg',name:'海'},\r\n\t\t\t\t{url:'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1585416671231&di=2b31d51afd46d03e492b10d8b089ccdd&imgtype=0&src=http%3A%2F%2Fdesk-fd.zol-img.com.cn%2Ft_s960x600c5%2Fg4%2FM02%2F01%2F0C%2FCg-4zFU5saeIEEOaAAcatIe29xYAAXVdAEdnLsABxrM840.jpg',name:'天'},\t\r\n\t\t\t]\r\n\t\t\tlocalStorage.setItem(\"bgPics\",JSON.stringify(picUrls))\r\n\t\t\tlocalStorage.setItem(\"bgPicsIndex\",0)\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tpicUrls,\r\n\t\t\tindex\r\n\t\t}\r\n\t}\r\n}\r\nexport default Manager","function PubSub(){\r\n\tvar topics = new Map()\r\n\tfunction newtopic(topic){\r\n\t\tif(topics.has(topic)){\r\n\t\t\tconsole.warn('一个相同的topic'+topic+'已经被创建了')\r\n\t\t}else{\r\n\t\t\ttopics.set(topic,new Array())\r\n\t\t}\r\n\t}\r\n\tfunction pub(topic,...args){\r\n\t\tif(topics.has(topic)){\r\n\t\t\tlet func\r\n\t\t\tfor(func of topics.get(topic)){\r\n\t\t\t\tfunc(...args)\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"没有:\"+topic+\"这个topic\")\r\n\t\t}\r\n\t}\r\n\tfunction sub(topic,callback){\r\n\t\tif(topics.has(topic)){\r\n\t\t\ttopics.get(topic).push(callback)\r\n\t\t} else {\r\n\t\t\tnewtopic(topic)\r\n\t\t\tconsole.warn(\"订阅了:\"+topic+\"这个topic,但是它并不存在, 现在它已经创建了. 请注意以防出现错误.\")\r\n\t\t\ttopics.get(topic).push(callback)\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tnewtopic,\r\n\t\tpub,\r\n\t\tsub\r\n\t}\r\n}\r\nconst ps = PubSub()\r\nexport default ps","import React from 'react'\r\nimport { Layout, Menu } from 'antd'\r\nimport {Link} from 'react-router-dom'\r\nimport { Badge } from 'antd'\r\nimport {\n  HomeOutlined,\n  InfoCircleOutlined,\n  MessageOutlined,\r\n  SettingOutlined,\r\n  InboxOutlined\n} from '@ant-design/icons';\r\n\r\nconst { Header, Content, Footer, Sider } = Layout\r\nclass ToolMenu extends React.Component{\r\nrender(){\r\n\treturn(\r\n\t\t<Menu style={{backgroundColor:'rgba(255,255,255,0.6)'}} theme=\"light\" defaultSelectedKeys={['1']}>\r\n\t\t\t\r\n\t\t\t\t<Menu.Item key=\"1\">\r\n\t\t\t\t\t<HomeOutlined/>\r\n\t\t\t\t\t<Link className=\"nav-text\" to='/home'>主页</Link>\r\n\t\t\t\t\t\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t<Menu.Item key=\"2\">\r\n\t\t\t\t  <MessageOutlined />\r\n\t\t\t\t  <Badge count={0}>\r\n\t\t\t\t  <Link className=\"nav-text\" to='/message'>消息</Link></Badge>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t\t\r\n\t\t\t\t<Menu.Item key=\"3\">\r\n\t\t\t\t  <InboxOutlined />\r\n\t\t\t\t  <span className=\"nav-text\">扩展</span>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t\t\r\n\t\t\t\t<Menu.Item key=\"4\">\r\n\t\t\t\t <SettingOutlined />\r\n\t\t\t\t  <Link className=\"nav-text\" to='/setting'>设置</Link>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t\t\r\n\t\t\t\t<Menu.Item key=\"5\">\r\n\t\t\t\t <InfoCircleOutlined />\r\n\t\t\t\t  <Link className=\"nav-text\" to='/about'>关于</Link>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t\r\n\t\t</Menu>\r\n\t)}\r\n}\r\nexport default ToolMenu","import React from 'react'\r\n\r\nimport PubSub from '../../lib/pub-sub'\r\nimport './css/style.css'\r\n\r\nlet baseTheme={\r\n\tinputFocus:{\r\n\t\twidth:'99%'\r\n\t}\r\n}\r\n\r\nexport default class SearchInput extends React.Component{\r\n\tstate={\r\n\t\tisFocus:false\r\n\t}\r\n    componentDidMount(){\r\n        PubSub.newtopic('input-focus')\r\n        PubSub.newtopic('input-blur')\r\n\t\tPubSub.newtopic('input-inputing')\r\n\t\tPubSub.newtopic('input-go')//回车键按下\r\n    }\r\n    handlefoucus = (e)=>{\r\n\t\tif(e.target.value != ''){\r\n\t\t\tthis.setState({isFocus:true})\r\n\t\t\tPubSub.pub('input-focus')\r\n\t\t} else {\r\n\t\t\tthis.setState({isFocus:false})\r\n\t\t}\r\n    }\r\n    handleblur = (e)=>{\r\n\t\tif(e.target.value == ''){\r\n\t\t\tPubSub.pub('input-blur')\r\n\t\t\tthis.setState({isFocus:false})\r\n\t\t}\r\n    }\r\n\thandelInput = (e) =>{\r\n\t\tif(e.target.value != ''){\r\n\t\t\tthis.setState({isFocus:true})\r\n\t\t\tPubSub.pub('input-inputing',e.target.value)\r\n\t\t} else {\r\n\t\t\tthis.setState({isFocus:false})\r\n\t\t}\r\n\t}\r\n\tonKeyup=(e)=>{\r\n\t\tif(e.keyCode === 13) {\r\n\t\t     PubSub.pub('input-go')\r\n\t\t}\r\n\t}\r\n\t\r\n    render(){\r\n        return (\r\n            <input type=\"text\" \r\n\t\t\tstyle={this.state.isFocus?baseTheme.inputFocus:{width:\"70%\"}} \r\n\t\t\tsize='20' className='search_input' placeholder='search' \r\n\t\t\tonChange={this.handelInput} \r\n\t\t\tonFocus={this.handlefoucus} \r\n\t\t\tonBlur={this.handleblur}\r\n\t\t\tonKeyUp={this.onKeyup}\r\n\t\t\t/>\r\n        )\r\n    }\r\n}\r\n\r\n ","import React from 'react'\r\nlet theme = {\r\n\tbackgroundColor:'rgba(255,255,255,0.2)',\r\n\tpadding:'5px',\r\n\tborderRadius:'5px',\r\n\tcolor:'#000',\r\n\tmargin:'5px'\r\n}\r\n\r\nclass AdvItem extends React.Component{\r\n\t\r\n    render(){\r\n        return(\r\n\t\t\t<a href={this.props.url} target='_blank'>\r\n\t\t\t<div class='adv_item' style={theme}>\r\n\t\t\t\t{this.props.type}:<br/>{this.props.keyword}</div>\r\n\t\t\t</a>\r\n    )}\r\n}\r\nexport default AdvItem","import PubSub from './pub-sub'\r\n\r\nconst DeviceDetector = {\r\n    inited:false,\r\n\tinit(){\r\n        if(!this.inited){\r\n            if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)){\r\n                        //移动端\r\n                this.__device_type = 'phone'\r\n            } else {\r\n                this.__device_type = 'pc'\r\n            }\r\n            PubSub.newtopic('screen-scale-change')\r\n            window.onresize = function(){\r\n                DeviceDetector.set_scale()\r\n            }\r\n            this.set_scale()\r\n            this.inited = true\r\n        }\r\n\t},\r\n\t__screen_scale:'',\r\n\t__device_type:'pc',\r\n\tget device_type(){\r\n\t\treturn this.__device_type\r\n\t},\r\n\tget screen_scale(){\r\n\t\treturn this.__screen_scale\r\n\t},\r\n\tset_scale(){\r\n        let scale = this.__screen_scale\r\n\t\tif(document.body.clientWidth < 450)\r\n\t\t\tthis.__screen_scale = 'small'\r\n\t\telse if(document.body.clientWidth < 900)\r\n\t\t\tthis.__screen_scale = 'middle'\r\n\t\telse\r\n            this.__screen_scale = 'large'\r\n\r\n        if(scale != this.__screen_scale)\r\n            PubSub.pub('screen-scale-change',this.__screen_scale)\r\n        \r\n\t}\r\n}\r\nexport default DeviceDetector","import deviceDetector from '../../../lib/device-detector.js'\r\n\r\nconst advFunctions = {\r\n\tbaidusearch(keyword){\r\n\t\tlet url = \"https://www.baidu.com/baidu?wd=\"\r\n\t\tlet mobileurl = \"https://m.baidu.com/s?word=\"\r\n\t\tif(deviceDetector.device_type == 'pc'){\r\n\t\t\turl = url+keyword\r\n\t\t} else {\r\n\t\t\turl = mobileurl+keyword\r\n\t\t}\r\n\t\treturn {\r\n\t\t\ttype:'百度(默认)',\r\n\t\t\turl:url\r\n\t\t}\r\n\t},\r\n\tbaidutrans(keyword){\r\n\t\tlet url = \"https://fanyi.baidu.com/translate?aldtype=16047&query=&keyfrom=baidu&smartresult=dict&lang=auto2zh#en/zh/\"+keyword\r\n\t\tlet mobileurl = \"https://www.baidu.com/sf_fanyi/?aldtype=38319&tpltype=sigma#zh/en/\"+keyword\r\n\t\tif(deviceDetector.device_type == 'pc'){\r\n\t\t\turl = url\r\n\t\t} else {\r\n\t\t\turl = mobileurl\r\n\t\t}\r\n\t\treturn {\r\n\t\t\ttype:'百度翻译',\r\n\t\t\turl:url\r\n\t\t}\r\n\t},\r\n\tget_adv(searchtext){\r\n\t\tlet fun_list=[this.baidusearch,this.baidutrans]\r\n\t\tlet advs = []\r\n\t\tfor (let f of fun_list){\r\n\t\t\tadvs.push(f(searchtext))\r\n\t\t}\r\n\t\treturn advs\r\n\t}\r\n}\r\n\r\nexport default advFunctions","import React from 'react'\r\n\r\nimport AdvItem from './adv-item'\r\n\r\nimport PubSub from '../../lib/pub-sub'\r\nimport advFuncs from './src/adv-funcs'\r\nimport './css/style.css'\r\nlet theme = {\r\n\tbackgroundColor:'rgba(255,255,255,0.5)',\r\n\tpadding:'5px',\r\n\tborderRadius:'5px',\r\n\tmarginTop:'5px',\r\n\tdisplay:'none'\r\n}\r\nclass AdvPanel extends React.Component{\r\n\tstate = {\r\n\t\tkeyword:'',\r\n\t\tdisplay:false,\r\n\t\tadvs:null\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tPubSub.sub('input-inputing',this.handelInput)\r\n\t\tPubSub.sub('input-blur',this.handelBlur)\r\n\t\tPubSub.sub('input-go',this.goDefault)\r\n\t}\r\n\thandelBlur=()=>{\r\n\t\tthis.setState({display:false})\r\n\t}\r\n\thandelInput=(keyword)=>{\r\n\t\tif(keyword){\r\n\t\t\tthis.findAdv(keyword)\r\n\t\t\tthis.setState({keyword,display:true})\r\n\t\t} else {\r\n\t\t\tthis.setState({display:false})\r\n\t\t}\r\n\t}\r\n\tfindAdv=(kw)=>{\r\n\t\tlet advs = advFuncs.get_adv(kw)\r\n\t\tthis.setState({advs:advs})\r\n\t}\r\n\tgoDefault=()=>{\r\n\t\twindow.open(this.state.advs[0].url,'_blank')\r\n\t}\r\n\trender(){\r\n\t\tlet res = []\r\n\t\tif(this.state.advs)\r\n\t\t\tres = this.state.advs.map((item,index)=>{\r\n\t\t\t\treturn <AdvItem url={item.url} type={item.type} keyword={this.state.keyword} key={index}/>\r\n\t\t\t})\r\n\t\t\r\n        return(\r\n\t\t\t<div style={{display:this.state.display?'block':'none'}} className=\"adv_panel\">\r\n\t\t\t\t{res}\r\n\t\t\t</div>\r\n\t\t)\r\n    }\r\n}\r\nexport default AdvPanel","export default function CssMix(...allcss){\r\n\t\t\tlet css = allcss.reduce((pre,now)=>{\r\n\t\t\t\tfor(let key in now){\r\n\t\t\t\t\tpre[key] = now[key]\r\n\t\t\t\t}\r\n\t\t\t\treturn pre\r\n\t\t\t},{})\r\n\t\t\treturn css\r\n\t\t}","import React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {Avatar,Popover,Button} from 'antd'\r\n\r\nimport cssMix from '../../../lib/css-mix'\r\nlet baseTheme = {\r\n\titemContainer:{\r\n\t\tfloat:'left'\r\n\t}\r\n}\r\n\r\nclass LinkItem extends React.Component{\r\n\t\r\n    render(){\r\n\t\tlet content = (\r\n\t\t\t<Button>{'del'+this.props.index}</Button>\r\n\t\t)\t\r\n\t\t// <div>\r\n\t\t// \t{this.props.linkname}\r\n\t\t// </div>\r\n        return(\r\n\t\t\t<a href={this.props.url} style={{color:this.props.theme.color}}>\r\n\t\t\t\t<div style={baseTheme.itemContainer}>\r\n\t\t\t\t\t<div align='center'>\r\n\t\t\t\t\t\t<Avatar src={this.props.url+'/favicon.ico'} size={50} alt={'?'}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</a>\r\n    )}\r\n}\r\nfunction ststetoprops(state){\r\n\treturn{\r\n\t\ttheme:state.theme.base\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tststetoprops\r\n)(LinkItem)\r\n","import React from 'react'\r\nimport {Avatar,Button,Modal,message,Input} from 'antd'\r\nimport {\n\tFormOutlined\n} from '@ant-design/icons';\r\nimport {connect} from 'react-redux'\r\n\r\nimport store from '../../../store/index'\r\nlet baseTheme = {\r\n\titemContainer:{\r\n\t\tfloat:'left'\r\n\t}\r\n}\r\nclass Add extends React.Component{\r\n\thandleClick=()=>{\r\n\t\tthis.props.open()\r\n\t}\r\n    render(){\r\n        return(\r\n\t\t<div style={baseTheme.itemContainer} onClick = {this.handleClick}>\r\n\t\t\t<div align='center'>\r\n\t\t\t\t<Avatar size={50} icon={<FormOutlined />}/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n    )}\r\n}\r\nexport default Add","import React from 'react'\r\nimport {Input,Button} from 'antd'\r\nimport { ArrowUpOutlined,EditOutlined,DeleteOutlined} from '@ant-design/icons'\r\nimport {connect} from 'react-redux'\r\n\r\nlet theme = {\r\n\twidth:'100%',\r\n\tfontSize:'1.2rem',\r\n\tbackgroundColor:'#eee',\r\n\tborderWidth: 1,\r\n\tborderColor: '#ddd',\r\n\tborderStyle: 'solid',\r\n\tdisplay:'flex',\r\n\tflexDirection:\"row\",\r\n\tjustifyContent:\"space-between\"\r\n}\r\n\r\nlet hidden = {\r\n\tdisplay:'none',\r\n}\r\nlet display = {\r\n\tdisplay:'block',\r\n\tborderWidth: 1,\r\n\tborderColor: '#ddd',\r\n\tborderStyle: 'solid',\r\n\tmargin:\"0px 0px 5px 0px\",\r\n}\r\nclass Edit extends React.Component{\r\n\tstate = {\r\n\t\tshowEdit:false,\r\n\t\tname:this.props.item.name,\r\n\t\turl:this.props.item.url,\r\n\t}\r\n\tshowEdit=()=>{\r\n\t\tthis.setState({showEdit:!this.state.showEdit})\r\n\t}\r\n\tdel=()=>{\r\n\t\tlet array = new Array(...this.props.list)\r\n\t\tarray.splice(parseInt(this.props.index),1)\r\n\t\tthis.props.updata(array)\r\n\t}\r\n\tmoveUp=()=>{\r\n\t\tlet i = this.props.index\r\n\t\tlet list = this.props.list\r\n\t\tif(i > 0){\r\n\t\t\tlet pre = list[i-1]\r\n\t\t\tlist[i-1] = list[i]\r\n\t\t\tlist[i] = pre\r\n\t\t\tthis.props.updata(list)\r\n\t\t}\r\n\t}\r\n\tchange=()=>{\r\n\t\tlet i = this.props.index\r\n\t\tlet list = this.props.list\r\n\t\tif(this.iname.state.value || this.iurl.state.value){\r\n\t\t\tif(this.iname.state.value)\r\n\t\t\t\tlist[i].name = this.iname.state.value\r\n\t\t\tif(this.iurl.state.value)\r\n\t\t\t\tlist[i].url = this.iurl.state.value\r\n\t\t\tthis.props.updata(list)\r\n\t\t}\r\n\t}\r\n    render(){\r\n\t\tlet name = this.state.name\r\n\t\tlet url = this.state.url\r\n        return(\r\n\t\t<div>\r\n\t\t\t<div style={theme}>\r\n\t\t\t\t{this.props.item.name}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<ArrowUpOutlined onClick={this.moveUp}/>\r\n\t\t\t\t\t<EditOutlined onClick={this.showEdit}/>\r\n\t\t\t\t\t<DeleteOutlined onClick={this.del}/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div style={this.state.showEdit?display:hidden}>\r\n\t\t\t\t<Input ref={input => this.iname =input}  placeholder={name} />\r\n\t\t\t\t<Input ref={input => this.iurl =input} placeholder={url} />\r\n\t\t\t\t<Button onClick={this.change}>确定</Button>\r\n\t\t\t\t<Button onClick={this.showEdit}>收起</Button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n    )}\r\n}\r\n\r\nexport default connect(\r\n\t(state)=>{\r\n\t\treturn {\r\n\t\t\tlist:[...state.links] //立即更新\r\n\t\t}\r\n\t},\r\n\t(dispatch)=>{\r\n\t\t\r\n\t\treturn {updata:(newList)=>{\r\n\t\t\t\t\tlocalStorage.setItem('linkList',JSON.stringify(newList))\r\n\t\t\t\t\tdispatch({type:'changeLinks',payload:newList})\r\n\t\t\t}}\r\n\t}\r\n)(Edit)\r\n ","import React from 'react'\r\n\r\nimport Edit from './link-edit'\r\nclass List extends React.Component{\r\n    render(){\r\n\t\tlet list = this.props.list.map((i,k)=>{\r\n\t\t\treturn <Edit item={i} key={i.name+k} index={k}/>\r\n\t\t})\r\n        return(\r\n\t\t<div>\r\n\t\t\t{list}\r\n\t\t</div>\r\n\t\t\t\r\n\t\t)}\r\n}\r\nexport default List","import React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {Avatar,Button,Modal,message,Input} from 'antd'\r\n\r\nimport LinkManager from '../../../lib/link-list'\r\nimport LinkItem from './link-item'\r\nimport Add from './add'\r\nimport LinkListEdit from './link-list'\r\n \r\nimport './style.css'\r\n\r\n\r\nclass LinkPanel extends React.Component{\r\n\tstate = {\r\n\t\tvis : false,\r\n\t\topacity:this.props.dockOpacity\r\n\t}\r\n\tbaseTheme = {\r\n\t\tdisplay:\"flex\",\r\n\t\tpadding:\"5px\",\r\n\t\tmargin:\"0px 10px\",\r\n\t\tborderRadius:\"15px\",\r\n\t\tflexDirection:\"row\",\r\n\t\tflexWrap:\"wrap\",\r\n\t\tbackgroundColor : \"rgba(255,255,255,\"+this.state.opacity+\")\",\r\n\t\tjustifyContent:\"space-between\"\r\n\t}\r\n\thandleOk=()=>{\r\n\t\tthis.add()\r\n\t\tmessage.info(\"添加完成\")\r\n\t\tthis.setState({\r\n\t\t\tvis:false,\r\n\t\t})\r\n\t}\r\n\thandleCancel=()=>{\r\n\t\tthis.setState({\r\n\t\t\tvis:false,\r\n\t\t})\r\n\t}\r\n\topen=()=>{\r\n\t\tthis.setState({\r\n\t\t\tvis:true,\r\n\t\t\t})\r\n\t}\r\n\tadd=()=>{\r\n\t\tlet name = this.refs.title.state.value\r\n\t\tlet url = this.refs.url.state.value\r\n\t\tlet frequency = 0\r\n\t\tthis.props.links.push({name,url,frequency})\r\n\t\tlocalStorage.setItem('linkList',JSON.stringify(this.props.links))\r\n\t\tthis.handleCancel()\r\n\t}\r\n\tcomponentWillUnmount(){\r\n\t\t\r\n\t}\r\n    render(){\r\n\t\t//console.log('props',this.props)\r\n\t\tlet links = this.props.links\r\n\t\tlet res = links.map((i,k)=>{\r\n\t\t\treturn <LinkItem url={i.url} linkname={i.name} key={k} index={k}/>\r\n\t\t})\r\n\t\t\r\n        return(\r\n\t\t\t<div style= {this.baseTheme}>\r\n\t\t\t\t\r\n\t\t\t\t{res}\r\n\t\t\t\t<Add open={this.open}/>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\ttitle=\"编辑\"\r\n\t\t\t\t\tvisible={this.state.vis}\r\n\t\t\t\t\tonOk={this.handleOk}\r\n\t\t\t\t\tonCancel={this.handleCancel}\r\n\t\t\t\t>\r\n\t\t\t\t\t<LinkListEdit list={this.props.links}/>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t添加\r\n\t\t\t\t\t<Input ref=\"title\" placeholder=\"标题\" />\r\n\t\t\t\t\t<Input ref=\"url\" placeholder=\"url\" />\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n    )}\r\n}\r\nfunction ststetoprops(state){\r\n\t//将store.state绑定到props,props等于下面这个return的对象\r\n\treturn{\r\n\t\ttheme:state.theme,\r\n\t\tlinks:state.links,\r\n\t\tdockOpacity:state.dockOpacity\r\n\t}\r\n}\r\nfunction dispatchtoprops(dispatch){\r\n\t//将dispatch绑定到props,props有下面这个return的对象的key\r\n\treturn {\r\n\t\t\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tststetoprops\r\n)(LinkPanel)\r\n","import React from 'react'\r\n\r\nlet baseTheme = {\r\n\tfontSize:'3rem',\r\n\ttextAlign:'center',\r\n\tcolor:\"#fff\"\r\n}\r\nclass Timer extends React.Component{\r\n\tcomponentDidMount(){\r\n\t\tthis.getTime()\r\n\t}\r\n\tstate = {\r\n\t\thour:0,\r\n\t\tmin:0\r\n\t}\r\n\tgetTime=()=>{\r\n\t\tlet d\r\n\t\tlet h\r\n\t\tlet m\r\n\t\tsetInterval(()=>{\r\n\t\t\td = new Date()\r\n\t\t\tm = d.getMinutes()\r\n\t\t\th = d.getHours()\r\n\t\t\tif(this.state.min != m || this.state.hour != h){\r\n\t\t\t\tif(m<10)\r\n\t\t\t\t\tm='0'+m\r\n\t\t\t\tthis.setState({hour:h,min:m})\r\n\t\t\t}\t\t\t\t\r\n\t\t},1000)\r\n\t}\r\n    render(){\r\n        return(\r\n\t\t<div style={baseTheme} >\r\n\t\t{this.state.hour}:{this.state.min}\r\n\t\t</div>\r\n    )}\r\n}\r\nexport default Timer","import React from 'react'\r\nimport { Row, Col ,Divider} from 'antd'\r\n\r\nimport SearchInput from '../search-input/search-input'\r\nimport AdvPanel from '../search-input/advPanel'\r\nimport LinkPanel from './src/link-panel'\r\nimport Timer from '../timer/index'\r\n\r\nlet base = {\r\n\twidth:\"100vw\",\r\n\theight:\"calc(99vh - 40px)  \",\r\n\tdisplay:\"flex\",\r\n\tflexDirection:\"column\",\r\n\tjustifyContent:\"space-between\"\r\n}\r\n\r\nclass Home extends React.Component{\r\n    render(){\r\n\t\t//\r\n        return(\r\n\t\t\t<div style={base}>\r\n\t\t\t<Row>\r\n\t\t\t    <Col xs={0}  sm={4} md={6} lg={8}>\r\n\t\t\t      \r\n\t\t\t    </Col>\r\n\t\t\t    <Col xs={24}  sm={16} md={12} lg={8} align=\"center\">\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<Timer/>\r\n\t\t\t\t\t<SearchInput/>\r\n\t\t\t\t\t<AdvPanel/>\r\n\t\t\t    </Col>\r\n\t\t\t    <Col xs={0}  sm={4} md={6} lg={8}>\r\n\t\t\t      \r\n\t\t\t    </Col>\r\n\t\t\t</Row>\r\n\t\t\t\r\n\t\t\t<Row>\r\n\t\t\t    <Col xs={0}  sm={4} md={5} >\r\n\t\t\t      \r\n\t\t\t    </Col>\r\n\t\t\t    <Col xs={24}  sm={16} md={14}  align=\"center\">\r\n\t\t\t\t\t<LinkPanel/>\r\n\t\t\t    </Col>\r\n\t\t\t    <Col xs={0}  sm={4} md={5}>\r\n\t\t\t      \r\n\t\t\t    </Col>\r\n\t\t\t</Row>\t\r\n\t\t\t</div>\r\n    )}\r\n}\r\nexport default Home","import React from 'react'\r\nimport { Card,Row, Col,Typography, Divider } from 'antd'\r\n\nconst { Title, Paragraph, Text } = Typography;\r\nclass About extends React.Component{\r\nrender(){\r\n\treturn(\r\n\t\t<div>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col xs={1}  sm={2} md={3} lg={4}>\r\n\t\t\t\t  \r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col xs={22}  sm={20} md={18} lg={16} align=\"center\">\r\n\t\t\t\t\t<div style={{backgroundColor:'#fff' ,}}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t    <Title>简介</Title>\r\n\t\t\t\t\t\t    <Paragraph>\r\n\t\t\t\t\t\t    这个网页旨在提供简洁的浏览器主页, 除了主页,未来还将提供一系列的扩展.\r\n\t\t\t\t\t\t    </Paragraph>\r\n\t\t\t\t\t\t\t<Title>联系我</Title>\r\n\t\t\t\t\t\t\t<Paragraph>\r\n\t\t\t\t\t\t\t\t如果你有意见和建议,欢迎发送邮件至:\r\n\t\t\t\t\t\t\t\tulan420@qq.com\r\n\t\t\t\t\t\t\t</Paragraph>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col xs={1}  sm={2} md={3} lg={4}>\r\n\t\t\t\t  \r\n\t\t\t\t</Col>\r\n\t\t\t\r\n\t\t\t</Row>\r\n\t\t\r\n\t\t</div>\r\n\t)}\r\n}\r\nexport default About","import React from 'react'\r\n\r\nimport {\n\tAppstoreOutlined\n} from '@ant-design/icons';\r\n\r\nimport PubSub from '../../lib/pub-sub'\r\n\r\nlet style = {\r\n\twidth:'100vw',\r\n\theight:'35px',\r\n\tbackgroundColor:'rgba(0,0,0,0)',\r\n\tposition:'absolute',\r\n\tzIndex:'100'\r\n}\r\nlet fntStyle = {\r\n\tcolor:'#fff',\r\n\tfontSize:\"2rem\"\r\n}\r\nclass Header extends React.Component{\r\n\tcomponentDidMount(){\r\n\t\tPubSub.newtopic('header-menubtn-clicked')\r\n\t}\r\n\tdealClick=()=>{\r\n\t\tPubSub.pub('header-menubtn-clicked')\r\n\t}\r\n\trender(){\r\n\t\t\r\n\t\treturn(\r\n\t\t\t<div style={style}>\r\n\t\t\t\t<AppstoreOutlined style={fntStyle} onClick={this.dealClick}/>\r\n\t\t\t</div>\r\n\t\t)}\r\n}\r\nexport default Header","function sleep(n) {\r\n\tlet start = new Date().getTime();\r\n\twhile (true) {\r\n\t\tif (new Date().getTime() - start > n) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nlet fileSp = new Array()\r\nlet fileSegTotal\r\nfunction createConn(resolve,reject){\r\n\tlet socket = new WebSocket('ws://localhost:8080')\r\n\tsocket.addEventListener('open', function (event) {\r\n\t\tresolve(socket)\r\n\t})\r\n\tsocket.onerror = function(){\r\n\t\treject()\r\n\t}\r\n}\r\n\r\n\r\nfunction fileSlice(file){\r\n\tfileSp = []\n\tlet start = 0\n\tlet end = start + 3072\n\tfor(;end<file.length;start=end,end+= 3072){\n\t\t//console.log() \n\t\tfileSp.push(file.slice(start,end))\n\t}\n\tfileSp.push(file.slice(start))\n\tconsole.log('文件段数：',fileSp.length)\n\tfileSegTotal = fileSp.length\n}\r\n\r\nfunction startFileTrans(){\r\n\tlet nowSeg = 0\r\n\tlet startTime\r\n\tfunction sendfileSeg(res = null){\r\n\t\tlet req = {\r\n\t\t\thead:{\r\n\t\t\t\torigin:'__wscli@file__',\r\n\t\t\t\ttype:'__@fileUpload__',\r\n\t\t\t\ttotal:fileSegTotal,\r\n\t\t\t\thandle:'handleAvatar'\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(nowSeg == 0){       //如果当前序列为0, 执行下面的语句\r\n\t\t\treq.head.seq = 0   //设置请求头序列为0\r\n\t\t\tstartTime = new Date().getTime() //记录开始传输时的时间\r\n\t\t\tServer.send(req)                 //发送请求\r\n\t\t\tnowSeg++                         //及时修改,否则第一次收到服务器消息时又会发送一次\r\n\t\t}\r\n\t\t/*\r\n\t\t\t发送后, 若当前序列仍然为0, 收到消息后,上面的语句又会发送一次\r\n\t\t*/\r\n\t\tif(res){\r\n\t\t\tif( res.head.ack <= res.head.total) {\r\n\t\t\tnowSeg = res.head.ack\r\n\t\t\treq.head.seq = nowSeg\r\n\t\t\treq.data = fileSp[nowSeg-1]\r\n\t\t\t//sleep(3000)\r\n\t\t\t//console.log('进度:'+(req.head.seq-1)/res.head.total)\r\n\t\t\tServer.send(req)\r\n\t\t\t} else {\r\n\t\t\t\tlet endTime = new Date().getTime()\r\n\t\t\t\t\r\n\t\t\t\tconsole.log('传输完成,平均速度(KB/s)',(2.304 * res.head.total)/(endTime-startTime)*1000)\r\n\t\t\t}\r\n\t\t}\t\t\t\t\t\t\r\n\t}\r\n\treturn sendfileSeg\r\n}\r\n\r\nconst Server = {\r\n\t__state:'close',\r\n\tsocket:null,\r\n\trouters:new Map(),\r\n\tonCreate:null,\r\n\tonMsg(msgText){\r\n\t\t//console.log('收到',msgText)\r\n\t\tlet msgObj = JSON.parse(msgText)\r\n\t\tswitch (msgObj.head.origin){\r\n\t\t\tcase '__wscli@all__':\r\n\t\t\t\tthis.routers.forEach(i => {\r\n\t\t\t\tif(i.onMsg)\r\n\t\t\t\t\ti.onMsg(msgText)\r\n\t\t\t\t})\r\n\t\t\t\tbreak\r\n\t\t\tcase '__wscli@file__':\r\n\t\t\t\tthis.__sendFileSeg(msgObj)\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tlet sender = this.routers.get(msgObj.head.origin)\r\n\t\t\t\tif(sender[msgObj.head.callback])\r\n\t\t\t\t\tsender[msgObj.head.callback](msgText)\r\n\t\t\t\telse\r\n\t\t\t\t\tthrow new Error('对象上没有定义:' + msgObj.head.callback+'这个函数')\r\n\t\t}\r\n\t},\r\n\tonErr(detail='',origin='__wscli@all__'){\r\n\t\tlet msg = {\r\n\t\t\thead:{\r\n\t\t\t\torigin,\r\n\t\t\t\tstate:'error',\r\n\t\t\t},\r\n\t\t\tdata:'错误:'+detail,\r\n\t\t}\r\n\t\tthis.onMsg(JSON.stringify(msg))\r\n\t},\r\n\tinit(apptype,sender){\r\n\t\tthis.routers.set(apptype,sender)\r\n\t\tif(this.__state == 'close')\r\n\t\t\tthis.conn()\r\n\t\telse {\r\n\t\t\tif(this.onCreate)\r\n\t\t\t\tthis.onCreate()\r\n\t\t}\r\n\t},\r\n\tconn(){\r\n\t\tlet that = Server\r\n\t\tnew Promise(createConn).then(s => {\r\n\t\t\tthat.onOpen() \r\n\t\t\tthat.socket = s\r\n\t\t\tthat.socket.addEventListener('message', function (event) {\r\n\t\t\t\tthat.onMsg(event.data)\r\n\t\t\t})\r\n\t\t\tthat.socket.addEventListener('close', function (event) {\r\n\t\t\t\tthat.onClose()\r\n\t\t\t})\r\n\t\t\tif(that.onCreate)\r\n\t\t\t\tthat.onCreate()\r\n\t\t}).catch(err => {\r\n\t\t\t\tthat.reConn()\r\n\t\t\t\tthat.onErr('与服务器建立链接失败, 将尝试重新连接.')\r\n\t\t})\r\n\t},\r\n\tsend(text){\r\n\t\tif(this.__state != 'close'){\r\n\t\t\tif(typeof text != 'string')\r\n\t\t\t\ttext = JSON.stringify(text)\r\n\t\t\tthis.socket.send(text)\r\n\t\t\t//console.log('发送',text)\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.onErr('发送失败, 与服务器的链接已断开.')\r\n\t\t}\r\n\t},\r\n\tsendfile(file){\r\n\t\tlet reader = new FileReader()\r\n\t\treader.readAsDataURL(file); \r\n\t\treader.onload=function(e){ \r\n\t\t\tconsole.log(this.result.length)\r\n\t\t\tfileSlice(this.result)\r\n\t\t\tServer.__sendFileSeg = startFileTrans()\r\n\t\t\tServer.__sendFileSeg()\r\n\t\t}\r\n\t},\r\n\tonOpen(){\r\n\t\tthis.__state = 'conn'\r\n\t},\r\n\tonClose(){\r\n\t\tthis.__conn = 'close'\r\n\t\tlet msg = {\r\n\t\t\thead:{\r\n\t\t\t\torigin:'__wscli@all__',\r\n\t\t\t\tstate:'error',\r\n\t\t\t},\r\n\t\t\tdata:'错误:与服务器的连接已中断,将尝试重新连接',\r\n\t\t}\r\n\t\tthis.onMsg(JSON.stringify(msg))\r\n\t\tthis.reConn()\r\n\t},\r\n\treConn(){\r\n\t\tif(this.__conn == 'close'){\r\n\t\t\tthis.routers.forEach(i => {\r\n\t\t\t\tif(i.onClose)i.onClose()\r\n\t\t\t})\r\n\t\t\tsetTimeout(this.conn,3000)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Server","import React from 'react'\r\nimport {Input,Button,Modal,message } from 'antd'\r\nimport {UserOutlined,KeyOutlined,SmileOutlined } from '@ant-design/icons'\r\nimport {connect} from 'react-redux'\r\n\r\nimport store from '../../store/index'\r\nimport Sever from '../../lib/ws-cli'\r\nclass Sign extends React.Component{\r\n\tstate = {\r\n\t\tdisplay:false\r\n\t}\r\n\tdata = {}\r\n\tcomponentDidMount=()=>{\r\n\t\tSever.init('Sign',this)\r\n\t}\r\n\tgetData=(t)=>{\r\n\t\tthis.data.id = this.refs.uid.state.value\r\n\t\tthis.data.name = this.refs.uname.state.value\r\n\t\t\r\n\t}\r\n\tgetPwd=(e)=>{\r\n\t\tthis.data.pwd = e.target.value\r\n\t}\r\n\tlogin=()=>{\r\n\t\tthis.getData()\r\n\t\tlet req = {\r\n\t\t\thead:{\r\n\t\t\t\torigin:'Sign',\r\n\t\t\t\ttype:'login',\r\n\t\t\t\tcallback:'login_res'\r\n\t\t\t},\r\n\t\t\tdata:this.data\r\n\t\t}\r\n\t\tSever.send(req)\r\n\t}\r\n\tlogin_res=(msg)=>{\r\n\t\tmsg = JSON.parse(msg)\r\n\t\tif(msg.head.state == 'error')\r\n\t\t\tmessage.error(msg.data)\r\n\t\telse {\r\n\t\t\tmessage.success('登录成功啦骚年！')\r\n\t\t\twindow.localStorage.setItem('user',JSON.stringify(msg.data))\r\n\t\t\twindow.localStorage.setItem('token',msg.token)\r\n\t\t\tlet user = msg.data\r\n\t\t\tuser.login = true\r\n\t\t\tthis.props.setUser(user)\r\n\t\t\tthis.props.close()\r\n\t\t}\r\n\t}\r\n\t\r\n\tsign=()=>{\r\n\t\tthis.getData()\r\n\t\tlet req = {\r\n\t\t\thead:{\r\n\t\t\t\torigin:'Sign',\r\n\t\t\t\ttype:'create_account',\r\n\t\t\t\tcallback:'sign_res'\r\n\t\t\t},\r\n\t\t\tdata:this.data\r\n\t\t}\r\n\t\tSever.send(req)\r\n\t}\r\n\tsign_res=(msg)=>{\r\n\t\tmsg = JSON.parse(msg)\r\n\t\tif(msg.head.state == 'error')\r\n\t\t\tmessage.error(msg.data)\r\n\t\telse {\r\n\t\t\tmessage.success(msg.data)\r\n\t\t}\r\n\t}\r\n    render(){\r\n\t\t\r\n        return(\r\n\t\t\t<Modal\r\n\t\t\t\tvisible={this.props.visible?true:false}\r\n\t\t\t\tfooter={null}\r\n\t\t\t\tclosable={false}\r\n\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<p>你还没有登录, 赶快登陆或注册一个账号吧!</p>\r\n\t\t\t\t<Input.Group>\r\n\t\t\t\t\t<Input ref=\"uid\" type=\"number\" placeholder=\"输入id\" prefix={<SmileOutlined />}/><br/><br/>\r\n\t\t\t\t\t<Input.Password onChange={t => this.getPwd(t)} ref=\"upwd\"  placeholder=\"输入密码\" prefix={<KeyOutlined />} /><br/><br/>\r\n\t\t\t\t\t<Input ref=\"uname\" placeholder=\"输入昵称\" prefix={<UserOutlined />} /><br/>\r\n\t\t\t\t</Input.Group>\r\n\t\t\t\t\t<Button type=\"primary\" onClick={this.login}>登录</Button>\r\n\t\t\t\t\t<Button type=\"primary\" onClick={this.sign}>注册</Button>\r\n\t\t\t\t\t<Button onClick={this.props.close}>关闭</Button>\r\n\t\t\t</Modal>\r\n\t\t)}\r\n}\r\n\r\nfunction ststetoprops(state){\r\n\t//将store.state绑定到props,props等于下面这个return的对象\r\n\treturn{\r\n\t\t\r\n\t}\r\n}\r\nfunction dispatchtoprops(){\r\n\t//将dispatch绑定到props,props有下面这个return的对象的key\r\n\treturn {\r\n\t\tsetUser:(user)=>store.dispatch({type:'userLogin',payload:user})\r\n\t}\r\n}\r\nexport default connect(\r\n\tststetoprops,\r\n\tdispatchtoprops\r\n)(Sign)","import React from 'react'\r\nimport { Avatar } from 'antd';\r\n\r\nclass UsrAva extends React.Component{\r\n\trender(){\r\n\t\tlet user,url\r\n\t\tif(user = localStorage.getItem('user')){\r\n\t\t\tuser = JSON.parse(user)\r\n\t\t\turl = \"http://localhost:3500/\"+user.id+\"/avatar.png\"\r\n\t\t\treturn (\r\n\t\t\t\t<div >\r\n\t\t\t\t\t<Avatar src={url} size={60}/> {user.name}\r\n\t\t\t\t</div>\t\r\n\t\t\t)\r\n\t\t}\r\n\t\telse \t\r\n\t\t\treturn (\r\n\t\t\t\t<div >\r\n\t\t\t\t\t<Avatar size={60}/>\r\n\t\t\t\t</div>\t\r\n\t\t\t)\r\n\t}\r\n}\r\n\r\nexport default UsrAva","import React from 'react'\r\nimport { Button,Input,Divider,Avatar,message } from 'antd'\r\n\r\nimport Server from '../../lib/ws-cli'\r\nimport Sign from '../sign/index'\r\nimport UsrAva from './avatar'\r\n\r\nlet style = {\r\n\tpadding:'10px',\r\n\ttextAlign:'center'\r\n}\r\nclass UserPanel extends React.Component{\r\n\tstate = {\r\n\t\tuserLogin:false,\r\n\t\tshowSign:false,\r\n\t\tuser:null\r\n\t}\r\n\tcomponentWillMount(){\r\n\t\tlet user\r\n\t\tif( user = localStorage.getItem('user')){\r\n\t\t\tuser = JSON.parse(user)\r\n\t\t\tthis.setState({userLogin:true,user})\r\n\t\t}\r\n\t\t\t\r\n\t\telse \r\n\t\t\tthis.setState({userLogin : false})\r\n\t\t\t\r\n\t\tServer.init('usrpre',this)\r\n\t}\r\n\ttoLogin=()=>{\r\n\t\tthis.setState({showSign:true})\r\n\t}\r\n\tcloseLogin=()=>{\r\n\t\tthis.setState({showSign:false})\r\n\t}\r\n\tupAvatar=()=>{\r\n\t\tlet file = this.refs.fileselect.files[0]\r\n\t\tconsole.log(file.size)\r\n\t\tServer.sendfile(file)\r\n\t}\r\n\tlogOut=()=>{\r\n\t\tthis.setState({\r\n\t\t\tuserLogin:false\r\n\t\t})\r\n\t\tmessage.info(\"你已退出登录！\")\r\n\t\tthis.props.logOut()\r\n\t}\r\n    render(){\r\n\t\tlet id\r\n\t\tif(this.state.user)\r\n\t\t\tid = this.state.user.id\r\n\t\tif(this.state.userLogin){\r\n\t\t\treturn(\r\n\t\t\t\t\t<div style={style}>\r\n\t\t\t\t\t<Avatar size={50} src={\"http://localhost:3500/\"+id+\"/avatar.png\" }/>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t{this.props.user.name}\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<Button onClick={this.props.logOut}>退出登录</Button>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<Divider />\r\n\t\t\t\t\t设置头像<br/>\r\n\t\t\t\t\t<input type='file' ref='fileselect'/>\r\n\t\t\t\t\t<Button onClick={this.upAvatar}>确定</Button>\r\n\t\t\t\t\t</div>\t\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\treturn(\r\n\t\t\t\t<div style={style}>\r\n\t\t\t\t<Sign visible={this.state.showSign} close={this.closeLogin}/>\r\n\t\t\t\t\t<UsrAva/>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<Button type=\"primary\" onClick={this.toLogin}>去登录</Button>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n    }  \r\n}\r\nexport default UserPanel","import React from 'react'\r\n\r\nlet active={\r\n\twidth:\"100px\",\r\n\tborderWidth: 2,\r\n\tborderColor: '#1890ff',\r\n\tborderStyle: 'solid',\r\n\tfloat:\"left\"\r\n}\r\nlet base = {\r\n\tfloat:\"left\",\r\n\tborderWidth: 1,\r\n\tborderColor: '#eee',\r\n\tborderStyle: 'solid',\r\n\twidth:\"100px\"\r\n}\r\nclass Pic extends React.Component{\r\n\tchangePic=()=>{\r\n\t\t//console.log('change')\r\n\t\tthis.props.changeTo(this.props.Index)\r\n\t}\r\n    render(){\r\n\t\tlet {currentIndex,Index,name,url} = this.props\r\n        return(\r\n\t\t<div style={(currentIndex == Index)?active:base} onClick={this.changePic}>\r\n\t\t\t<img src={url} width=\"100%\"/>\r\n\t\t\t<br/>\r\n\t\t\t{name}\r\n\t\t</div>\r\n    )}\r\n}\r\nexport default Pic","import React from 'react'\r\nimport {connect} from 'react-redux'\r\n\r\nimport PubSub from '../../lib/pub-sub'\r\nimport store from '../../store/index'\r\nimport Pic from './component/pic'\r\nlet style = {\r\n\twidth:'90%',\r\n\tbroader:'1px #ccc solid'\r\n}\r\nclass PicSelect extends React.Component{\r\n\tstate = {\r\n\t\tcurrentI : 0\r\n\t}\r\n\tcomponentWillUnmount(){\r\n\t    this.setState({\r\n\t    \tcurrentI : this.props.bgPic.index\r\n\t    })\r\n\t\t\r\n\t}\r\n    changeTo=(i)=>{\r\n\t\tthis.setState({\r\n\t\t\tcurrentI : i\r\n\t\t})\r\n\t\tthis.props.changeIndex(i)\r\n\t\tPubSub.pub(\"picindexchange\",i)\r\n\t\tlocalStorage.setItem(\"bgPicsIndex\",i)\r\n\t}\r\n\trender(){\r\n\t\tlet pics = this.props.bgPic.picUrls.map((i,k)=>{\r\n\t\t\treturn (\r\n\t\t\t\t<Pic currentIndex={this.props.bgPic.index} changeTo={this.changeTo} Index={k} key={k} name={i.name} url={i.url}></Pic>\r\n\t\t\t)\r\n\t\t})\r\n        return(\r\n\t\t<div style={style}>\r\n\t\t\t{pics}\r\n\t\t</div>\r\n    )}\r\n}\r\nfunction ststetoprops(state){\r\n\treturn{\r\n\t\tbgPic:state.bgPic\r\n\t}\r\n}\r\nfunction dispatchtoprops(){\r\n\treturn {\r\n\t\tchangeIndex:(i)=>store.dispatch({type:'bgIndexChange',payload:i}),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tststetoprops,\r\n\tdispatchtoprops\r\n)(PicSelect)","import React from 'react'\r\nimport { Card,Row, Col ,Switch ,Divider,Radio, InputNumber,Slider} from 'antd'\r\nimport {connect} from 'react-redux'\r\n\r\nimport UserPanel from '../user/usr-pre'\r\nimport PubSub from '../../lib/pub-sub'\r\nimport PicSele from './bg'\r\n\r\n\r\nclass Setting extends React.Component{\r\n\tstate={\r\n\t\tvalue:1,\r\n\t}\r\n\tblurSize=0\r\n\tonChange=(e)=>{\r\n\t\tthis.setState({\r\n\t\t      value: e.target.value\r\n\t\t})\r\n\t\tif(e.target.value == 1){\r\n\t\t\tthis.props.changeThemeName('light')\r\n\t\t} else {\r\n\t\t\tthis.props.changeThemeName('dark')\r\n\t\t}\r\n\t}\r\n\tonBlurChange=(v)=>{\r\n\t\tPubSub.pub('change-blur-size',v)\r\n\t\tthis.blurSize = v\r\n\t}\t\r\n\tonBlurNumChange=(v)=>{\r\n\t\tPubSub.pub('change-blur-size',v)\r\n\t\tthis.blurSize = v\r\n\t}\r\n\tcomponentWillUnmount(){\r\n\t    localStorage.setItem('blursize',this.blurSize)\r\n\t}\r\n    userLoginOut=()=>{\r\n    \tlocalStorage.removeItem('user')\r\n    \tthis.props.delUser()\r\n    }\r\n\tonDockOpacityChange=(v)=>{\r\n\t\tthis.props.changeDockOpacity(v)\r\n\t}\r\n\t\r\n\trender(){\r\n        return(\r\n\t\t<div>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col xs={0}  sm={4} md={6} lg={8}>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col xs={24}  sm={16} md={18} lg={8} >\r\n\t\t\t\t\t<Card title=\"用户\">\r\n\t\t\t\t\t\t<UserPanel user={this.props.user} logOut={this.userLoginOut}></UserPanel>\r\n\t\t\t\t\t\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<Card title=\"外观\">\r\n\t\t\t\t\t    主题切换\r\n\t\t\t\t\t\t <Radio.Group onChange={this.onChange} value={this.state.value}>\r\n\t\t\t\t\t\t\t<Radio value={1}>Light</Radio>\r\n\t\t\t\t\t\t\t<Radio value={2}>Dark</Radio>\r\n\t\t\t\t\t\t</Radio.Group>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t <Divider />\r\n\t\t\t\t\t\t dock背景透明度\r\n\t\t\t\t\t\t <Slider\r\n\t\t\t\t\t\t \tmin={0}\r\n\t\t\t\t\t\t \tmax={1}\r\n\t\t\t\t\t\t \tonChange={this.onDockOpacityChange}\r\n\t\t\t\t\t\t \tvalue={this.props.dockOpacity}\r\n\t\t\t\t\t\t\tstep={0.1}\r\n\t\t\t\t\t\t />\r\n\t\t\t\t\t\t <br/>\r\n\t\t\t\t\t    修改背景\r\n\t\t\t\t\t\t<PicSele />\r\n\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t背景模糊\r\n\t\t\t\t\t\t<Slider\r\n\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\tmax={25}\r\n\t\t\t\t\t\t\tonChange={this.onBlurChange}\r\n\t\t\t\t\t\t\tvalue={typeof this.props.blurSize === 'number' ? this.props.blurSize : 0}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\tmax={25}\r\n\t\t\t\t\t\t\tvalue={this.props.blurSize}\r\n\t\t\t\t\t\t\tonChange={this.onBlurNumChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<Card title=\"性能\">\r\n\t\t\t\t\t    减少动画效果 <Switch></Switch>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col xs={0}  sm={4} md={6} lg={8}>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</div>\r\n    )}\r\n}\r\n\r\nfunction ststetoprops(state){\r\n\treturn{\r\n\t\tuser:{...state.user},\r\n\t\ttheme:{...state.theme},\r\n\t\tblurSize:state.bgBlurSize,\r\n\t\tdockOpacity:state.dockOpacity\r\n\t}\r\n}\r\nfunction dispatchtoprops(dispatch){\r\n\treturn {\r\n\t\tchangeblursize:(v)=>dispatch({type:'changeblursize',payload:v}),\r\n\t\tchangeBackPic:(v)=>dispatch({type:'changeblursize',payload:v}),\r\n\t\tchangeThemeName:(v)=>dispatch({type:'changethemename',payload:v}),\r\n\t\tchangeDockOpacity:(v)=>dispatch({type:'changeopacitysize',payload:v}),\r\n\t\tsetUser:(user)=>dispatch({type:'userLogin',payload:user}),\r\n\t\tdelUser:()=>dispatch({type:'userLoginOut',payload:{}})\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tststetoprops,\r\n\tdispatchtoprops\r\n)(Setting)\r\n//export default Setting","import React from 'react'\r\nimport {Layout, Menu ,Row, Col ,Divider} from 'antd'\r\nimport {Link} from 'react-router-dom'\r\nclass Message extends React.Component{\r\n    render(){\r\n        return(\r\n\t\t<div>\r\n\t\t\t<Menu mode=\"horizontal\" defaultSelectedKeys={['1']}>\r\n\t\t\t\t<Menu.Item key=\"1\">\r\n\t\t\t\t\t<Link to='/message/all'>墙</Link>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\r\n\t\t\t\t<Menu.Item key=\"2\">\r\n\t\t\t\t\t<Link to='/message/send'>私信</Link>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t</Menu>\t\t \r\n\t\t\t<div style={{height:'calc(100vh - 48px)'}}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</div>\r\n\t\t</div>\r\n    )}\r\n}\r\nexport default Message","import React from 'react'\r\nimport {Input,Button,Card,Modal,message,Row,Col,Affix,Avatar } from 'antd'\r\n\r\nimport Sign from '../sign/index'\r\nimport Server from '../../lib/ws-cli'\r\n\r\nconst { TextArea } = Input\r\n\r\nlet base = {\r\n\twidth: 300,\r\n\tbackgroundColor:\"#fff\",\r\n\tfloat:\"left\",\r\n\tpadding:\"5px\"\r\n}\r\nclass AllMsg extends React.Component{\r\n\t_post_his=[]\r\n\tstate = {\r\n\t\tpostit:[],\r\n\t\tconnState:300,\r\n\t\tuserUnlogin:true,\r\n\t\teditvisible:false,\r\n\t\tconfirmLoading:false\r\n\t}\r\n\tcomponentWillMount(){\r\n\t\tif(!window.localStorage.getItem(\"user\")){\r\n\t\t\tthis.setState({userUnlogin:true})\r\n\t\t} else {\r\n\t\t\tthis.setState({userUnlogin:false})\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\t//Server.onCreate = this.creatSuc\r\n\t\t//Server.onMsg = this.recv\r\n\t\t\r\n\t\tServer.init('all-msg',this)\r\n\t}\r\n\tonMsg=(msg)=>{\r\n\t\tmsg = JSON.parse(msg)\r\n\t\tif(msg.head.state == 'error')\r\n\t\t\tmessage.error(msg.data)\r\n\t}\r\n\tcreatSuc=()=>{\r\n\t\tthis.setState({connState:200})\r\n\t}\r\n\tfetchDataBack=(msg)=>{\r\n\t\tmsg = JSON.parse(msg)\r\n\t\tif(msg.head.state == 'error')\r\n\t\t{\r\n\t\t\tmessage.error(msg.data)\r\n\t\t} else {\r\n\t\t\tfor(let i of msg.data)\r\n\t\t\t\tthis._post_his.push(i)\r\n\t\t\tthis.setState({postit:this._post_his})\r\n\t\t}\r\n\t}\r\n\toffset = 0\r\n\tfetchPostData=()=>{\r\n\t\tlet token = localStorage.getItem('token')\r\n\t\tlet user = JSON.parse(localStorage.getItem('user'))\r\n\t\tlet msgNum = 2\r\n\t\tlet req = {\r\n\t\t\thead:{\r\n\t\t\t\torigin:'all-msg',\r\n\t\t\t\ttype:'get_postit',\r\n\t\t\t\tcallback:'fetchDataBack'\r\n\t\t\t},\r\n\t\t\tpara:{\r\n\t\t\t\tlimit:msgNum,\r\n\t\t\t\toffset:this.offset,\r\n\t\t\t\tid:user.id,\r\n\t\t\t\ttoken\r\n\t\t\t}\r\n\t\t}\r\n\t\tServer.send(req)\r\n\t\tthis.offset += msgNum\r\n\t}\r\n\tpostData=()=>{\r\n\t\tlet token = localStorage.getItem('token')\r\n\t\tlet user = JSON.parse(localStorage.getItem('user'))\r\n\t\tlet context = this.refs.msginput.innerText\r\n\t\tlet title = this.refs.msgtitle.state.value\r\n\t\tlet req = {\r\n\t\t\thead:{\r\n\t\t\t\torigin:'all-msg',\r\n\t\t\t\ttype:'post_postit',\r\n\t\t\t\tcallback:'postDataBack'\r\n\t\t\t},\r\n\t\t\tdata:{\r\n\t\t\t\tsender:user.name,\r\n\t\t\t\tsenderid:user.id,\r\n\t\t\t\ttitle,\r\n\t\t\t\tcontext,\r\n\t\t\t\ttime:'2020:12:12:20:20'\r\n\t\t\t},\r\n\t\t\tpara:{\r\n\t\t\t\tid:user.id,\r\n\t\t\t\ttoken\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({confirmLoading:true})\r\n\t\tif (!title){\r\n\t\t\tthis.errInfo('您忘记了填写标题,这是不被允许的行为.')\r\n\t\t} else \r\n\t\t\tServer.send(JSON.stringify(req))\r\n\t}\r\n\tpostDataBack=(msg)=>{\r\n\t\tmsg = JSON.parse(msg)\r\n\t\tthis.setState({confirmLoading:false})\r\n\t\tif(msg.head.state == 'error')\r\n\t\t{\r\n\t\t\tmessage.error(msg.data)\r\n\t\t} else {\r\n\t\t\tmessage.success(msg.data)\r\n\t\t\tthis.setState({editvisible:false})\r\n\t\t}\r\n\t\t\r\n\t}\r\n\terrInfo=(text)=>{\r\n\t\tModal.info({\r\n\t\t    title: '警告：',\r\n\t\t    content: (\r\n\t\t      <div>\r\n\t\t         <p>{text}</p>  \r\n\t\t      </div>\r\n\t\t    )\r\n\t\t  })\r\n\t}\r\n\thandleCancel=()=>{\r\n\t\tthis.setState({\r\n\t\t      editvisible: false,\r\n\t\t\t  confirmLoading:false\r\n\t\t})\r\n\t}\r\n\topenEdit=()=>{\r\n\t\tthis.setState({\r\n\t\t      editvisible: true,\r\n\t\t})\r\n\t}\r\n    render(){\r\n\t\tlet showMsg = this.state.postit.map((i,k)=>{\r\n\t\t\t\r\n\t\t\treturn (\r\n\t\t\t<div key={k} style={{display:'inline-block',margin:'5px'}}>\r\n\t\t\t<div style={base} >\r\n\t\t\t\t<Avatar size={30} src={\"http://localhost:3500/\"+i.senderid+\"/avatar.png\"}></Avatar>{i.sender}\r\n\t\t\t\t<h2>\r\n\t\t\t\t\t{i.title}\r\n\t\t\t\t</h2>\r\n\t\t\t\t    <div style={{whiteSpace:'pre-line'}}>{i.context}</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t</div>)\r\n\t\t})\r\n        const { editvisible, confirmLoading } = this.state\r\n\t\treturn(\r\n\t\t<div >\r\n\t\t\t<Sign unLogin={this.state.userUnlogin}/>\r\n\t\t\t<Modal\r\n\t\t\t  title=\"随手写\"\r\n\t\t\t  visible={editvisible}\r\n\t\t\t  onOk={this.postData}\r\n\t\t\t  confirmLoading={confirmLoading}\r\n\t\t\t  onCancel={this.handleCancel}\r\n\t\t\t>\r\n\t\t\t\t<Input ref=\"msgtitle\" placeholder=\"输入文章标题\"/>\r\n\t\t\t\t<div ref=\"msginput\" contentEditable=\"true\" style={{minHeight:'3rem',backgroundColor:'#eee'}}></div>\r\n\t\t\t</Modal>\t\t\t\r\n\t\t\t<br/>\r\n\t\t\t<Row gutter={[5, 10]}>\r\n\t\t\t\t<Col xs={24}  sm={24} md={6} lg={5}>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col xs={24}  sm={24} md={14} lg={12}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{showMsg}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Button onClick={this.fetchPostData}>更多消息</Button>\r\n\t\t\t\t\t<Button onClick={this.openEdit}>也写一个</Button>\t\t\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col xs={0}  sm={0} md={4} lg={8}>\r\n\t\t\t\t\t\t\r\n\t\t\t\t</Col>\r\n\t\t\t\t\r\n\t\t\t</Row>\r\n\t\t\t\r\n\t\t</div>\r\n    )}\r\n\t\r\n}\r\nexport default AllMsg","import React from 'react'\r\n\r\nimport cssMix from '../../../lib/css-mix'\r\n\r\nlet base = {\r\n\tmaxWidth: '70%',\r\n\tpadding: '10px',\r\n\tcolor:' white',\r\n\twordBreak:'break-all',\r\n\twordWrap:'break-word',\r\n\tbackgroundColor: 'cornflowerblue',\r\n\tborder: '1px rgba(0,0,0,0) solid'\r\n}\r\nlet sendstyle = {\r\n\tborderRadius: '5px 0px 5px 5px'\r\n}\r\nlet recvstyle = {\r\n\tborderRadius: '0px 5px 5px 5px'\r\n}\r\n\r\nclass MsgBubb extends React.Component{\r\n\t\r\n    render(){\r\n\t\tlet msgBody = this.props.msgBody\r\n\t\tlet style=null\r\n\t\tif(msgBody.type == 'send'){\r\n\t\t\tstyle = cssMix(base,sendstyle)\r\n\t\t} else {\r\n\t\t\tstyle = cssMix(base,recvstyle)\r\n\t\t}\r\n        return(\r\n\t\t<div style={style}>\r\n\t\t\t{msgBody.context}\r\n\t\t</div>\r\n    )}\r\n}\r\nexport default MsgBubb","import React from 'react'\r\n\r\nlet left = {\r\n\twidth: '0px',\r\n\theight:'0px',\r\n\tborder: '5px solid',\r\n\tborderColor:'transparent  cornflowerblue transparent transparent'\r\n}\r\nlet right = {\r\n\twidth: '0px',\r\n\theight:' 0px',\r\n\tborder: '5px solid',\r\n\tborderColor:' transparent  transparent transparent cornflowerblue'\r\n}\r\nclass Tri extends React.Component{\r\n    render(){\r\n        return(\r\n\t\t<div style={this.props.dir=='left'?left:right}></div>\r\n    )}\r\n}\r\nexport default Tri","import React from 'react'\r\nimport {Avatar} from 'antd'\r\n\r\nimport MsgBubb from './msg-bubble'\r\nimport Tri from './tri'\r\nlet style = {\r\n\trecv:{\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection:'row',\r\n\t\tjustifyContent:'flex-start',\r\n\t\tmargin:'5px 0px'\r\n\t},\r\n\tsend:{\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection:'row',\r\n\t\tjustifyContent:'flex-end',\r\n\t\tmargin:'5px 0px'\r\n\t}\r\n\t\r\n}\r\nclass MsgRow extends React.Component{\r\n    render(){\r\n\t\tlet msgBody = this.props.msgBody\r\n\t\tlet show = []\r\n\t\tlet url = \"http://localhost:3500/\"+msgBody.id+\"/avatar.png\"\r\n\t\tif(msgBody.type=='recv'){\r\n\t\t\tshow.push(<Avatar src={url} size={30}/>)\r\n\t\t\tshow.push(<Tri dir={'left'}/>)\r\n\t\t}\r\n\t\tshow.push(<MsgBubb msgBody={msgBody}/>)\r\n\t\tif(msgBody.type=='send'){\r\n\t\t\tshow.push(<Tri dir={'right'}/>)\r\n\t\t\tshow.push(<Avatar src={url} size={30}/>)\r\n\t\t}\r\n        return(\r\n\t\t<div style={this.props.msgBody.type=='send'?style.send:style.recv} key={this.props.index}>\r\n\t\t\t{show}\r\n\t\t</div>\r\n    )}\r\n}\r\nexport default MsgRow","import React from 'react'\r\nimport {Button,Input,Row,Col,message} from 'antd'\r\nimport MsgRow from './msg-item'\r\nconst { TextArea } = Input\r\nlet baseTheme = {\r\n\tmsgCase:{\r\n\t\twidth:'100%',\r\n\t\theight:'60vh',\r\n\t\tbackgroundColor:'rgba(255,255,255,0.6)',\r\n\t\toverflowY:'scroll'\r\n\t},\r\n\tcontaniner:{\r\n\t\twidth:'100%',\r\n\t\theight:'100%',\r\n\t\toverflowY:'hidden',\r\n\t\tbackgroundColor:'rgba(255,255,255,0.4)'\r\n\t}\r\n}\r\nclass EditPanel extends React.Component{\r\n\t\r\n\tsubmit=()=>{\r\n\t\tlet text = this.refs.msginput.state.value\r\n\t\tlet tid = this.props.nowPeople.id\r\n\t\tthis.props.methods.send(tid,text)\r\n\t}\r\n    render(){\r\n\t\tlet Msgs = this.props.allMsg.filter(m => (m.id == this.props.nowPeople.id || m.type == 'send'))\r\n\t\tlet showMsg = Msgs.map((i,k)=>{\r\n\t\t\tif(i.type === 'send'){\r\n\t\t\t\ti.id = this.props.nowUser.id\r\n\t\t\t}\r\n\t\t\treturn <MsgRow msgBody={i} key={k} index={k}/>\r\n\t\t})\r\n\t\tlet edit = (\r\n\t\t\t<div style={baseTheme.contaniner} >\r\n\t\t\t\t\t<div style={{backgroundColor:'#fff',fontSize:'1.2rem'}}>{this.props.nowPeople.name}</div>\r\n\t\t\t\t\t<div style={baseTheme.msgCase}>\r\n\t\t\t\t\t\t{showMsg}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col span={24}>\r\n\t\t\t\t\t\t\t<Button onClick={this.submit}>发送</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={24}>\r\n\t\t\t\t\t\t\t<TextArea ref='msginput' rows={2}  allowClear={true} />\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t)\r\n\t\tlet wait = (\r\n\t\t\t<div style={{height:'80vh',backgroundColor:'#eee'}}>选择一个好友来聊天</div>\r\n\t\t)\r\n        return(\r\n\t\t\t<div>\r\n\t\t\t\t{this.props.nowPeople.name?edit:wait}\r\n\t\t\t</div>\r\n\t\t\r\n    )}\r\n}\r\nexport default EditPanel","import React from 'react'\r\nimport {Button,Avatar} from 'antd'\r\nimport {UserOutlined} from '@ant-design/icons';\r\n\r\nlet base = {\r\n\tbackgroundColor:\"rgba(255,255,255,0.7)\",\r\n\tpadding:\"2px 5px\",\r\n\tborderWidth: 1,\r\n\tborderColor: '#eee',\r\n\tborderStyle: 'solid',\r\n}\r\nclass Fitem extends React.Component{\r\n\thandleClick=()=>{\r\n\t\tlet methods = this.props.methods\r\n\t\tmethods.chatWith({id:this.props.friend.id,name:this.props.friend.name})\r\n\t}\r\n    render(){\r\n\t\tlet friend = this.props.friend\r\n\t\tlet url = \"http://localhost:3500/\"+friend.id+\"/avatar.png\"\r\n        return(\r\n\t\t<div style={base} onClick={this.handleClick} >\r\n\t\t\t<Avatar src={url} size={30}/> {friend.name}\r\n\t\t\t<p>快来和我聊天吧</p>\r\n\t\t</div>\r\n    )}\r\n}\r\nexport default Fitem","import React from 'react'\r\nimport {Button,Input,Row,Col,message,Modal} from 'antd'\r\nimport {UserAddOutlined} from '@ant-design/icons';\r\n\r\nimport Edit from './src/edit-panel'\r\nimport Server from '../../lib/ws-cli'\r\nimport FriendItem from './src/friend'\r\n\r\nconst { TextArea } = Input\r\n\r\nclass SendMsg extends React.Component{\r\n\tstate={\r\n\t\tconnState:'世界上最远的距离就是没网...',\r\n\t\tuser:null,\r\n\t\ttoken:'',\r\n\t\tallMsg:[],\r\n\t\tnowPeople:{\r\n\t\t\tname:'',\r\n\t\t\tid:NaN\r\n\t\t},\r\n\t\tfriends:[],\r\n\t\taddfvis:false\r\n\t}\r\n\t\r\n\tmsgHistory=[]\r\n\tcomponentDidMount(){\r\n\t\tServer.init('SendMsg',this)\r\n\t\tlet user = JSON.parse(localStorage.getItem('user'))\r\n\t\tif(!user)\r\n\t\t\treturn\r\n\t\tlet token = localStorage.getItem('token')\r\n\t\tthis.setState({user:user,token:token})\r\n\t\tlet req = {\r\n\t\t\thead:{\r\n\t\t\t\torigin:'SendMsg',\r\n\t\t\t\ttype:'chat',\r\n\t\t\t\tcallback:'dealRecvMsg',\r\n\t\t\t\tcall:'connres'\r\n\t\t\t},\r\n\t\t\tpara:{\r\n\t\t\t\tuid:user.id,\r\n\t\t\t\ttoken,\r\n\t\t\t\tdo:'connect'\r\n\t\t\t}\r\n\t\t}\r\n\t\tServer.send(req)\r\n\t\tthis.showFriends()\r\n\t}\r\n\tcomponentWillUnmount(){\r\n\t\tlet user = JSON.parse(localStorage.getItem('user'))\r\n\t\tif(!user)\r\n\t\t\treturn\r\n\t\tlet token = localStorage.getItem('token')\r\n\t\tlet req = {\r\n\t\t\thead:{\r\n\t\t\t\torigin:'SendMsg',\r\n\t\t\t\ttype:'chat',\r\n\t\t\t\tcallback:'dealRecvMsg',\r\n\t\t\t\tcall:'connres'\r\n\t\t\t},\r\n\t\t\tpara:{\r\n\t\t\t\tuid:user.id,\r\n\t\t\t\ttoken,\r\n\t\t\t\tdo:'disconnect'\r\n\t\t\t}\r\n\t\t}\r\n\t\tServer.send(req)\r\n\t}\r\n\tshowFriends=()=>{\r\n\t\tlet friends\r\n\t\tif(friends = localStorage.getItem('friends'))\r\n\t\t\tthis.setState({friends:JSON.parse(friends)})\r\n\t\telse {\r\n\t\t\tfriends = [{id:100000,name:'ULAN'}]\r\n\t\t\tlocalStorage.setItem('friends',JSON.stringify(friends))\r\n\t\t\tthis.setState({friends:friends})\r\n\t\t}\r\n\t\t \r\n\t}\r\n\taddFriend=()=>{\r\n\t\tlet f = {\r\n\t\t\tid:this.refs.infid.state.value,\r\n\t\t\tname: this.refs.infname.state.value\r\n\t\t}\r\n\t\tif(f.id && f.name){\r\n\t\t\tlet fs = this.state.friends\r\n\t\t\tfs.push(f)\r\n\t\t\tlocalStorage.setItem('friends',JSON.stringify(fs))\r\n\t\t\tthis.setState({friends:fs})\r\n\t\t} else\r\n\t\t\tmessage.error('请填写完成')\r\n\t\t\r\n\t}\r\n\tdealRecvMsg=(msg)=>{\r\n\t\tmsg = JSON.parse(msg)\r\n\t\tif (msg.head.state == 'success'){\r\n\t\t\tswitch (msg.head.call) {\r\n\t\t\t\tcase 'connres':\r\n\t\t\t\t\tmessage.success(msg.data)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'newmsg' :\r\n\t\t\t\t\tconsole.log(msg.data)\r\n\t\t\t\t\tthis.recv(msg.data)\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tmessage.error(msg.data)\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tsend=(tid,text)=>{\r\n\t\ttid = parseInt(tid)\r\n\t\tthis.msgHistory.push({type:'send',context:text})\r\n\t\tthis.setState({allMsg:this.msgHistory})\r\n\t\tlet req = {\r\n\t\t\thead:{\r\n\t\t\t\torigin:'SendMsg',\r\n\t\t\t\ttype:'chat',\r\n\t\t\t\tcallback:'dealRecvMsg',\r\n\t\t\t\tcall:'newmsg'\r\n\t\t\t},\r\n\t\t\tpara:{\r\n\t\t\t\tuid:this.state.user.id,\r\n\t\t\t\ttid,\r\n\t\t\t\ttoken:this.state.token,\r\n\t\t\t\tdo:'send'\r\n\t\t\t},\r\n\t\t\tdata:{\r\n\t\t\t\tsenderid:this.state.user.id,\r\n\t\t\t\tsender:this.state.user.name,\r\n\t\t\t\tcontext:text,\r\n\t\t\t\ttime:'2020:03:19'\r\n\t\t\t}\r\n\t\t}\r\n\t\tServer.send(req)\r\n\t}\r\n\tchatWith=(people)=>{\r\n\t\tthis.setState({nowPeople:people})\r\n\t}\r\n\trecv=(msgs)=>{\r\n\t\tfor(let m of msgs){\r\n\t\t\tthis.msgHistory.push({type:'recv',id:m.senderid,context:m.context})\r\n\t\t}\r\n\t\tthis.setState({allMsg:this.msgHistory})\r\n\t}\r\n    handleCancel=()=>{\r\n\t\tthis.setState({addfvis:false})\r\n\t}\r\n\thandleAdd=()=>{\r\n\t\tthis.setState({addfvis:true})\r\n\t}\r\n\trender(){\r\n\t\tlet friendList = this.state.friends.map((i,k)=>{\r\n\t\t\treturn <FriendItem friend={i} methods={{chatWith:this.chatWith}} key={k}/>\r\n\t\t})\r\n\t\t\r\n        return(\r\n\t\t<Row gutter={[1]}>\r\n\t\t\t<Modal\r\n\t\t\ttitle=\"编辑\"\r\n\t\t\tvisible={this.state.addfvis}\r\n\t\t\tonOk={this.addFriend}\r\n\t\t\tonCancel={this.handleCancel}\r\n\t\t\t>\r\n\t\t\t\t<Input type='number' ref='infid'  placeholder=\"输入id\"/>\r\n\t\t\t\t<Input ref='infname'  placeholder=\"输入备注\"/>\r\n\t\t\t</Modal>\r\n\t\t\t<Col span={6} style={{backgroundColor:\"rgba(255,255,255,0.3)\"}}>\r\n\t\t\t\t<Button block onClick={this.handleAdd} icon={<UserAddOutlined />} >\r\n\t\t\t\t\t添加\r\n\t\t\t\t</Button>\r\n\t\t\t\t{friendList}\r\n\t\t\t</Col>\r\n\t\t\t<Col span={18}>\r\n\t\t\t\t<Edit allMsg={this.state.allMsg} nowPeople={this.state.nowPeople} nowUser={this.state.user} methods={{send:this.send}}></Edit>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t\t\r\n    )}\r\n}\r\nexport default SendMsg","import React from 'react'\r\nimport {Route,Switch,Redirect,BrowserRouter,Link} from 'react-router-dom'\r\nimport {Drawer, Button } from 'antd';\r\nimport { Row, Col } from 'antd';\r\nimport {connect} from 'react-redux'\r\nimport store from '../store/index'\r\n\r\nimport PubSub from '../lib/pub-sub'\r\n\r\nimport ToolMenu from './menu/index'\r\nimport HomePage from './home/index'\r\nimport About from './about/index'\r\nimport Header from './header/index'\r\nimport UserPanel from './user/usr-pre'\r\nimport UserAva from './user/avatar'\r\nimport Setting from './setting/index'\r\nimport Message from './message/index'\r\nimport AllMsg from './message/all-msg'\r\nimport SendMsg from './message/send-msg'\r\n\r\nclass MainLayout extends React.Component{\r\n\tcomponentWillMount(){\r\n\t\tPubSub.sub('header-menubtn-clicked',this.dealDrawer)\r\n\t\tlet user\r\n\t\tif (user = localStorage.getItem('user')) {\r\n\t\t\tuser = JSON.parse(user)\r\n\t\t\tthis.props.setUser(user)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.props.delUser(user)\r\n\t\t}\r\n\t}\r\n\tstate = {\r\n\t    visible:false\r\n\t}\r\n\tdealDrawer=()=>{\r\n\t\tthis.setState({\r\n\t\t  visible: true,\r\n\t\t})\r\n\t}\r\n\tonClose = () => {\r\n\t    this.setState({\r\n\t      visible: false,\r\n\t    })\r\n\t}\r\n\tuserLoginOut=()=>{\r\n\t\tlocalStorage.removeItem('user')\r\n\t\tthis.props.delUser()\r\n\t}\r\n\t\r\n\trender(){\r\n\t\tlet user\r\n\t\tif(this.props.user.login){\r\n\t\t\tuser = (<UserAva/>)\r\n\t\t} else {\r\n\t\t\tuser = (<UserPanel user={this.props.user} logOut={this.userLoginOut}/>)\r\n\t\t}\r\n\t\treturn(\r\n\t\t<BrowserRouter>\r\n\t\t\t<Drawer\r\n\t\t\ttitle=\"菜单\"\r\n\t\t\t    placement=\"left\"\r\n\t\t\t    closable={true}\r\n\t\t\t    onClose={this.onClose}\r\n\t\t\t    visible={this.state.visible}\r\n\t\t\t>\r\n\t\t\t\t{user}\r\n\t\t\t\t<ToolMenu/>\r\n\t\t\t</Drawer>\r\n\t\t\t <Header/>\r\n\t\t\t\t<br/><br/>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route path='/home' component={HomePage}/>\r\n\t\t\t\t\t<Route path='/about'  component={About}/>\r\n\t\t\t\t\t<Route path='/setting'  component={Setting}/>\r\n\t\t\t\t\t<Route path='/message' \r\n\t\t\t\t\t render={()=>(\r\n\t\t\t\t\t      <Message>\r\n\t\t\t\t\t        <Route path=\"/message/all\" exact={true} component={AllMsg} />\r\n\t\t\t\t\t\t\t<Route path=\"/message/send\" exact={true} component={SendMsg} />\r\n\t\t\t\t\t\t\t<Redirect to='/message/all'/>\r\n\t\t\t\t\t      </Message>\r\n\t\t\t\t\t    )}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Redirect to='/home'/>\r\n\t\t\t\t</Switch>\r\n\t\t\t</BrowserRouter>\r\n\t\t\t\r\n\t)\r\n\t}\r\n}\r\n\r\nfunction ststetoprops(state){\r\n\t//将store.state绑定到props,props等于下面这个return的对象\r\n\treturn{\r\n\t\tuser:state.user\r\n\t}\r\n}\r\nfunction dispatchtoprops(){\r\n\t//将dispatch绑定到props,props有下面这个return的对象的key\r\n\treturn {\r\n\t\tsetUser:(user)=>store.dispatch({type:'userLogin',payload:user}),\r\n\t\tdelUser:()=>store.dispatch({type:'userLoginOut',payload:{}})\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tststetoprops,\r\n\tdispatchtoprops\r\n)(MainLayout)\r\n","import React from 'react'\r\nimport {connect} from 'react-redux'\r\n\r\nimport cssMix from '../../lib/css-mix'\r\nimport PubSub from '../../lib/pub-sub'\r\nimport './style.css'\r\n\r\nlet base = {\r\n\twidth:'100vw',\r\n\theight:'100vh',\r\n\tposition:'fixed',\r\n\tzIndex:'-1',\r\n\ttransition: 'all 0.25s linear'\r\n}\r\n\r\nclass BackPic extends React.Component{\r\n\tstate={\r\n\t    isBlur:false,\r\n\t\tpicUrls:this.props.bgPic.picUrls,\r\n\t\tindex:this.props.bgPic.index,\r\n\t}\r\n    componentDidMount(){\r\n\t\tlet size\r\n\t\tPubSub.sub(\"picindexchange\",this.changeIndex)\r\n\t    if(size = localStorage.getItem('blursize')){\r\n\t\t\tsize = parseInt(size)\r\n\t\t\tif(size>=0 && size<=25){\r\n\t\t\t\tthis.lastBlur = size\r\n\t\t\t\tthis.setState({isBlur:true})\r\n\t\t\t\tthis.props.changeblursize(size)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlocalStorage.setItem('blursize',0)\r\n\t\t}\r\n\t\tPubSub.sub('change-blur-size',this.blurBySize)\r\n    }\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t    //console.log(\"ReceiveProps\",nextProps)\r\n\t\t//console.log(\"prevState\",prevState)\r\n\t\tlet newstate = {\r\n\t\t\tpicUrls:nextProps.bgPic.picUrls,\r\n\t\t\tindex:nextProps.bgPic.index\r\n\t\t}\r\n\t\treturn newstate\r\n\t}\r\n\tchangeIndex=(i)=>{\r\n\t\tthis.setState({\r\n\t\t\tindex:i\r\n\t\t})\r\n\t}\r\n\tlastBlur = 0\r\n    blur=()=>{\r\n\t\tthis.lastBlur = this.props.blurSize\r\n        if(this.state.isBlur == false){\r\n\t\t\tthis.props.changeblursize(25)\r\n        }\r\n    }\r\n    unblur=()=>{\r\n        if(this.state.isBlur == true){          \r\n\t\t\tthis.blurBySize(this.lastBlur)\r\n        }\r\n    }\r\n\tblurBySize=(size)=>{\r\n\t\tif(size>0){\r\n\t\t\tthis.setState({isBlur:true})\r\n\t\t} else {\r\n\t\t\tthis.setState({isBlur:false})\r\n\t\t}\r\n\t\tthis.props.changeblursize(size)\r\n\t}\r\n    render(){\r\n\t\tlet {picUrls,index} = this.state\r\n\t\tlet theme = null\r\n\t\tlet blur = {filter:'blur('+this.props.blurSize+'px)'}\r\n\t\tindex = parseInt(index)\r\n\t\tlet bg = {\r\n\t\t\tbackground:\"url(\"+picUrls[index].url+\") no-repeat center \",\r\n\t\t\tbackgroundSize:\"cover\"\r\n\t\t}\r\n\t\ttheme = cssMix(base,bg,blur)\r\n        return (\r\n\t\t\t<div style={theme} className={this.state.isBlur?'blur':'unblur'}></div>\r\n        )\r\n    }\r\n    \r\n}\r\n\r\nfunction ststetoprops(state){\r\n\treturn{\r\n\t\ttheme:state.theme,\r\n\t\tblurSize:state.bgBlurSize,\r\n\t\tbgPic:state.bgPic\r\n\t}\r\n}\r\nfunction dispatchtoprops(dispatch){\r\n\treturn {\r\n\t\tchangeblursize:(size)=>dispatch({type:'changeblursize',payload:size}),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tststetoprops,\r\n\tdispatchtoprops\r\n)(BackPic)\r\n","import React from 'react';\n\nimport './App.css';\n\n\r\nimport MainLayout from './components/main-layout'\nimport BackPic from './components/back-pic/back-pic'\n\n\nfunction App() {\n  return (\n    <div className='main'>\n      <BackPic/>\n      <MainLayout/>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport DeviceDetector from './lib/device-detector'\nimport {Provider} from 'react-redux'\r\n\r\nimport store from './store/index.js'\nDeviceDetector.init()\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t<App />\r\n\t</Provider>\r\n\t, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}